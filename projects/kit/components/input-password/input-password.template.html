<tui-primitive-textfield
    class="textfield"
    [pseudoFocus]="pseudoFocus"
    [pseudoHover]="pseudoHover"
    [pseudoActive]="pseudoActive"
    [invalid]="computedInvalid"
    [focusable]="focusable"
    [nativeId]="nativeId"
    [tuiTextfieldType]="inputType"
    [disabled]="computedDisabled"
    [readOnly]="readOnly"
    [tuiTextfieldIcon]="interactive ? iconContent : ''"
    [value]="value"
    (valueChange)="onValueChange($event)"
    (focusedChange)="onFocused($event)"
>
    <ng-content></ng-content>
    <ng-content
        select="input"
        ngProjectAs="input"
    ></ng-content>
</tui-primitive-textfield>

<ng-template
    #iconContent="polymorpheus"
    [polymorpheus]="type"
>
    <ng-container *tuiLet="passwordTexts$ | async as texts">
        <tui-svg
            *polymorpheusOutlet="icon as src; context: context"
            automation-id="tui-password__icon"
            tuiHintId="not_required"
            class="icon"
            [tuiHint]="texts[0] && texts[1] && hintContent"
            [tuiHintDirection]="hintController.direction"
            [tuiHintMode]="computedMode$ | async"
            [src]="src"
            (click)="togglePasswordVisibility()"
        ></tui-svg>

        <ng-template
            #hintContent="polymorpheus"
            polymorpheus
        >
            {{ isPasswordHidden ? texts[0] : texts[1] }}
        </ng-template>
    </ng-container>
</ng-template>
